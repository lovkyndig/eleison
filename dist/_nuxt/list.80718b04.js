import{T as ae,H as oe}from"./components.6ebd9158.js";import{_ as ie}from"./IconCustom.vue.a1bc1845.js";import{_ as ue}from"./nuxt-link.b1a18705.js";import{a as ce,s as de,Y as pe,K as P,r as b,b as he,w as ge,o as u,e as c,i as a,p as L,a9 as me,f as s,h as d,u as e,t as x,F as M,k as N,T as fe,j as w,v as k,l as q,X as xe,a8 as ye,L as _e,M as ve,G as be,$ as ne}from"./entry.89ebc114.js";import{u as U}from"./asyncData.ede7125b.js";import{f as we}from"./states.a590cbcf.js";import{_ as ke}from"./_plugin-vue_export-helper.c27b6911.js";const S=I=>(_e("data-v-ee57f2ba"),I=I(),ve(),I),Ce={class:"shrink-0 px-4 sm:px-8 py-4 space-y-4 sm:sticky top-0 inset-x-0 z-10 bg-gray-50"},Te={class:"flex items-start sm:space-x-2"},$e={class:"grow max-w-full space-y-2"},qe={class:"p-2 flex items-start text-sm bg-gray-100 sm:space-x-4"},Ae={class:"px-2 py-1 sm:hidden"},Se={class:"shrink-0"},Le=S(()=>s("p",null,"all",-1)),Me=["onClick"],Ne={class:"space-y-2"},Ie={class:"p-2 flex items-start text-sm bg-gray-100 rounded sm:space-x-4"},Fe=S(()=>s("p",null," Tags ",-1)),je=S(()=>s("p",{class:"px-2 py-1 sm:hidden"}," Tags ",-1)),De=["disabled","onClick"],He={class:"p-2 flex items-start text-sm bg-gray-100 rounded sm:space-x-4"},Ve={class:"px-2 py-1 sm:hidden"},Be=["disabled","onClick"],Ee={class:"flex items-center space-x-2"},ze=S(()=>s("hr",null,null,-1)),Oe={class:"shrink-0 mx-4 sm:mx-8 hidden sm:flex justify-between items-center text-sm"},Re=S(()=>s("p",{class:"hidden sm:block"}," Clear Filter ",-1)),Ge={class:"hidden sm:block"},Ke={key:0,class:"grow flex flex-col justify-center items-center space-y-2 text-gray-400"},Pe=S(()=>s("p",{class:"text-xl"}," Loading ",-1)),Ue={key:1,class:"grow container p-4 sm:p-8 mx-auto space-y-4"},Xe={class:"flex items-start"},Ye={class:"grow font-bold text-base sm:text-lg"},Je={key:0,class:"px-10 flex flex-wrap gap-2 text-xs"},Qe=["onClick"],We=["onClick"],Ze=ce({__name:"list",async setup(I){let f,A;const F=de(),o=pe(),{data:X}=([f,A]=P(()=>U("rootFolder",()=>be())),f=await f,A(),f);let _;const Y=[];Array.isArray(X.value)&&(_=X.value.find(r=>r._path==="/article"),_!=null&&_.children&&_.children.length>0&&_.children.forEach(r=>{"children"in r&&Y.push(r)}));const j=(r="")=>{let n="";const p=r.split("/");return p.length===3&&p[1]==="article"&&(n=p[2]),n},y=b("all"),D=b(!1),H=r=>{y.value===r?y.value="all":y.value=r,g.value=[],T.value="all",E()},C=b(!0);let z,O;const R=[],G=[],J={},Q={};if(_&&_.children.length>0){for(const r of _.children)if("children"in r){const n=[],p=[],{data:v}=([f,A]=P(()=>U(`${r._path}-filter`,()=>ne(`${r._path}`).where({_type:"markdown"}).only(["tags","series"]).find())),f=await f,A(),f);v.value.forEach(i=>{i.tags&&(n.push(...i.tags),R.push(...i.tags)),i.series&&(p.push(i.series),G.push(i.series))});const l=j(r._path);l&&(J[l]=[...new Set(n)],Q[l]=[...new Set(p)])}else r._type&&r._type==="markdown"&&(r.tags&&R.push(...r.tags),r.series&&G.push(r.series));z=new Set(R),O=new Set(G)}const g=b([]),V=b(!1),W=r=>{if(r==="all"){g.value=[],E();return}if(g.value.length>0){const n=g.value.findIndex(p=>p===r);n!==-1?g.value.splice(n,1):g.value.push(r)}else g.value.push(r);E()},T=b("all"),B=b(!1),Z=r=>{T.value===r?T.value="all":T.value=r,E()},E=()=>{xe({path:"/list",query:{theme:y.value,tags:g.value,series:T.value}})};he(()=>{var v,l,i,$;const r=((v=o.query)==null?void 0:v.theme)||"all";y.value=r;let n=[];typeof((l=o.query)==null?void 0:l.tags)=="string"?n=[o.query.tags]:Array.isArray((i=o.query)==null?void 0:i.tags)&&(n=o.query.tags),g.value=n;const p=(($=o.query)==null?void 0:$.series)||"all";T.value=p});const{pending:ee,data:te}=([f,A]=P(()=>U("articles",()=>ne("article").only(["title","description","_type","_path","contentType","_type","series","seriesOrder","tags"]).sort({seriesOrder:1,$numeric:!0}).find())),f=await f,A(),f),K=b([]);ge(()=>o.fullPath,()=>{var n,p,v;if(o.path!=="/list"||te.value.length===0)return;let r=te.value;if((n=o.query)!=null&&n.theme&&o.query.theme!=="all"&&(r=r.filter(l=>{const i=l._path.split("/");return i.length>=3?i[2]===o.query.theme:!1})),(p=o.query)!=null&&p.tags){let l=[];typeof o.query.tags=="string"?l=[o.query.tags]:Array.isArray(o.query.tags)&&(l=o.query.tags),l.length>0&&(r=r.filter(i=>l.some($=>i.tags?i.tags.includes($):!1)))}(v=o.query)!=null&&v.series&&o.query.series!=="all"&&(r=r.filter(l=>l.series===o.query.series)),K.value=r},{immediate:!0});const h=b(!0),se=we(),le=r=>{const n=se.value[r];return n?n.iconName:se.value.default.iconName};return(r,n)=>{const p=ae,v=oe,l=ie,i=ue,$=ye;return u(),c("div",null,[a(v,null,{default:L(()=>[a(p,null,{default:L(()=>[me("List")]),_:1})]),_:1}),a($,{name:"base"},{default:L(()=>[s("div",Ce,[s("div",Te,[s("button",{class:d(["shrink-0 p-2.5 hidden sm:flex justify-center items-center transition-colors duration-300 rounded",e(C)?"bg-purple-500 hover:bg-purple-400 text-white":"bg-purple-100 text-purple-400 hover:text-purple-500"]),onClick:n[0]||(n[0]=t=>C.value=!e(C))},[a(l,{name:"mdi:filter-plus-outline",class:"w-6 h-6"})],2),s("div",$e,[s("div",qe,[s("button",{class:"shrink-0 px-2 py-1 hidden sm:flex items-center text-gray-500 hover:bg-gray-200 rounded",onClick:n[1]||(n[1]=t=>D.value=!e(D))},[a(l,{name:"ic:round-keyboard-arrow-right",class:d(["w-5 h-5 transition-transform duration-300",e(D)?"rotate-90":"rotate-0"])},null,8,["class"]),s("p",null,x(e(F).filter.category),1)]),s("p",Ae,x(e(F).filter.category),1),s("ul",{class:d(["filter-list-container",e(D)?"max-h-96":"max-h-8"])},[s("li",Se,[s("button",{class:d(["px-2 py-1 flex items-center space-x-1 transition-colors duration-300 rounded",e(y)==="all"?"text-white bg-purple-500 hover:bg-purple-400":"text-purple-400 hover:text-purple-500 bg-purple-100"]),onClick:n[2]||(n[2]=t=>H("all"))},[a(l,{name:"material-symbols:category-rounded",class:"w-5 h-5"}),Le],2)]),(u(),c(M,null,N(Y,t=>s("li",{key:t._path,class:"shrink-0"},[s("button",{class:d(["px-2 py-1 flex items-center space-x-1 transition-colors duration-300 rounded",e(y)===j(t._path)?"text-white bg-purple-500 hover:bg-purple-400":"text-purple-400 hover:text-purple-500 bg-purple-100"]),onClick:m=>H(j(t._path))},[a(l,{name:"material-symbols:category-rounded",class:"shrink-0 w-5 h-5"}),s("p",null,x(j(t._path)),1)],10,Me)])),64))],2)]),a(fe,{"enter-from-class":"-translate-y-8 opacity-0","enter-active-class":"transition-all duration-300 ease-out","enter-to-class":"translate-y-0 opacity-100","leave-from-class":"translate-y-0 opacity-100","leave-active-class":"transition-all duration-100 ease-in","leave-to-class":"-translate-y-8 opacity-0"},{default:L(()=>[w(s("div",Ne,[s("div",Ie,[s("button",{class:"shrink-0 px-2 py-1 hidden sm:flex items-center text-gray-500 hover:bg-gray-200 rounded",onClick:n[3]||(n[3]=t=>V.value=!e(V))},[a(l,{name:"ic:round-keyboard-arrow-right",class:d(["w-5 h-5 transition-transform duration-300",e(V)?"rotate-90":"rotate-0"])},null,8,["class"]),Fe]),je,e(z)?(u(),c("ul",{key:0,class:d(["filter-list-container",e(V)?"max-h-96":"max-h-8"])},[(u(!0),c(M,null,N(["all",...e(z)],t=>{var m;return u(),c("li",{key:t,class:"shrink-0"},[s("button",{class:d(["px-2 py-1 flex items-center space-x-1 transition-colors duration-300 rounded disabled:opacity-30",e(g).length===0&&t==="all"||e(g).includes(t)?"text-white bg-purple-500 hover:bg-purple-400":"text-purple-400 hover:text-purple-500 bg-purple-100"]),disabled:!(t==="all"||e(y)==="all"||(m=J[e(y)])!=null&&m.includes(t)),onClick:re=>W(t)},[s("p",null,"#"+x(t),1)],10,De)])}),128))],2)):q("",!0)]),s("div",He,[s("button",{class:"shrink-0 px-2 py-1 hidden sm:flex items-center text-gray-500 hover:bg-gray-200 rounded",onClick:n[4]||(n[4]=t=>B.value=!e(B))},[a(l,{name:"ic:round-keyboard-arrow-right",class:d(["w-5 h-5 transition-transform duration-300",e(B)?"rotate-90":"rotate-0"])},null,8,["class"]),s("p",null,x(e(F).filter.series),1)]),s("p",Ve,x(e(F).filter.series),1),e(O)?(u(),c("ul",{key:0,class:d(["filter-list-container",e(B)?"max-h-96":"max-h-8"])},[(u(!0),c(M,null,N(["all",...e(O)],t=>{var m;return u(),c("li",{key:t,class:"shrink-0"},[s("button",{class:d(["px-2 py-1 flex items-center space-x-1 transition-colors duration-300 rounded disabled:opacity-30",e(T)===t?"text-white bg-purple-500 hover:bg-purple-400":"text-purple-400 hover:text-purple-500 bg-purple-100"]),disabled:!(t==="all"||e(y)==="all"||(m=Q[e(y)])!=null&&m.includes(t)),onClick:re=>Z(t)},[a(l,{name:"bi:collection",class:"shrink-0 w-5 h-5"}),s("p",null,x(t),1)],10,Be)])}),128))],2)):q("",!0)])],512),[[k,e(C)]])]),_:1}),s("div",Ee,[s("button",{class:"px-4 py-1 sm:hidden text-red-400 hover:text-red-500 bg-red-50 hover:bg-red-100 transition-colors duration-300 rounded",onClick:n[5]||(n[5]=t=>H("all"))},[a(l,{name:"ant-design:clear-outlined",class:"w-4 h-4"})]),s("button",{class:"grow py-1 sm:hidden text-purple-500 bg-purple-100 rounded",onClick:n[6]||(n[6]=t=>C.value=!e(C))},[w(a(l,{name:"ic:round-keyboard-arrow-down",class:"w-4 h-4"},null,512),[[k,!e(C)]]),w(a(l,{name:"ic:round-keyboard-arrow-up",class:"w-4 h-4"},null,512),[[k,e(C)]])]),s("button",{class:d(["px-4 py-1 sm:hidden transition-colors duration-300 rounded",e(h)?"text-white bg-green-500 hover:bg-green-400":"text-green-400 hover:text-green-500 bg-green-50 hover:bg-green-100"]),onClick:n[7]||(n[7]=t=>h.value=!e(h))},[w(a(l,{name:"ic:round-unfold-less",class:"w-4 h-4"},null,512),[[k,e(h)]]),w(a(l,{name:"ic:round-unfold-more",class:"w-4 h-4"},null,512),[[k,!e(h)]])],2)])])]),ze]),s("div",Oe,[s("button",{class:"p-2 flex items-center text-red-400 hover:text-red-500 bg-red-50 hover:bg-red-100 transition-colors duration-300 rounded",onClick:n[8]||(n[8]=t=>H("all"))},[a(l,{name:"ant-design:clear-outlined",class:"w-5 h-5"}),Re]),s("button",{class:d(["p-2 flex items-center transition-colors duration-300 rounded",e(h)?"text-white bg-green-500 hover:bg-green-400":"text-green-400 hover:text-green-500 bg-green-50 hover:bg-green-100"]),onClick:n[9]||(n[9]=t=>h.value=!e(h))},[w(a(l,{name:"ic:round-unfold-less",class:"w-5 h-5"},null,512),[[k,e(h)]]),w(a(l,{name:"ic:round-unfold-more",class:"w-5 h-5"},null,512),[[k,!e(h)]]),s("p",Ge,x(e(h)?"Less":"More")+" Detail ",1)],2)]),e(ee)?(u(),c("div",Ke,[a(l,{name:"eos-icons:loading",class:"w-10 h-10"}),Pe])):q("",!0),!e(ee)&&e(K)?(u(),c("div",Ue,[s("ul",{class:d(e(h)?"space-y-2":"grid sm:grid-cols-1 md:grid-cols-2 xl:grid-cols-3 items-start gap-2")},[(u(!0),c(M,null,N(e(K),t=>(u(),c("li",{key:t._path,class:"space-y-2"},[a(i,{to:t._path,class:"block px-4 py-2 text-gray-600 hover:text-blue-500 hover:bg-blue-100 transition-colors duration-300 rounded-lg space-y-2"},{default:L(()=>[s("div",Xe,[a(l,{name:le(t._type),class:"shrink-0 p-1 w-6 h-6 sm:w-7 sm:h-7"},null,8,["name"]),s("h2",Ye,x(t.title),1)]),t.description?w((u(),c("p",{key:0,class:"px-6 text-sm opacity-60"},x(t.description),513)),[[k,e(h)]]):q("",!0)]),_:2},1032,["to"]),t._type==="markdown"&&(t.tags||t.series)?w((u(),c("div",Je,[(u(!0),c(M,null,N(t.tags,m=>(u(),c("button",{key:m,class:d(["px-2 py-1 transition-colors duration-300 rounded",e(g).length===0&&m==="all"||e(g).includes(m)?"text-white bg-blue-500 hover:bg-blue-400":"text-blue-400 hover:text-blue-500 bg-blue-100"]),onClick:re=>W(m)}," #"+x(m),11,Qe))),128)),t.series?(u(),c("button",{key:0,class:d(["px-2 py-1 flex justify-center items-center space-x-1 transition-colors duration-300 rounded",e(T)===t.series?"text-white bg-green-500 hover:bg-green-400":"text-green-400 hover:text-green-500 bg-green-100"]),onClick:m=>Z(t.series)},[a(l,{name:"bi:collection",class:"shrink-0 w-4 h-4"}),s("p",null,x(t.series),1)],10,We)):q("",!0)],512)),[[k,e(h)]]):q("",!0)]))),128))],2)])):q("",!0)]),_:1})])}}});const ot=ke(Ze,[["__scopeId","data-v-ee57f2ba"]]);export{ot as default};
