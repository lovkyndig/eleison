import{_ as N}from"./IconCustom.vue.a1bc1845.js";import{a as V,r as v,b as F,w as P,o as c,e as u,f as o,h as g,u as l,i as p,t as w,j as k,v as L,F as x,k as C,l as U,m as G,p as S,T as z,q as J}from"./entry.89ebc114.js";import{u as K,a as O,b as Q,c as X}from"./states.a590cbcf.js";import{_ as Y}from"./_plugin-vue_export-helper.c27b6911.js";const ee={class:"sm:mx-8 lg:mx-0 mt-4 mb-20 sm:mb-4 relative z-10 border border-gray-200 rounded-lg"},te={class:"image-list-header p-2 relative z-10 flex justify-between items-center gap-2 bg-gray-100 rounded-t-lg shadow shadow-gray-200"},le={class:"shrink-0 flex space-x-2 items-center"},se={class:"text-center text-xs text-gray-400"},ae={class:"image-text-container grow text-center text-xs text-gray-400 overflow-x-auto"},oe={class:"shrink-0 flex space-x-2 items-center"},re=["disabled"],ne=["disabled"],ie=["disabled"],ce=["disabled"],ue=["src","alt"],de={class:"sidebar-image-list p-2 absolute left-0 inset-y-0 -z-10 hidden sm:flex flex-col space-y-2 bg-gray-100 rounded-lg border border-gray-200 overflow-y-auto overscroll-y-none"},ve=["onClick"],ge=["src","alt"],pe={class:"sidebar-image-list p-2 absolute inset-x-0 bottom-0 -z-10 flex sm:hidden space-x-2 bg-gray-100 rounded-lg border border-gray-200 overflow-x-auto"},me=["onClick"],he=["src","alt"],fe=V({__name:"ImageList",props:{height:{type:String,default:"400px"}},setup(A){const E=A,{flatUnwrap:B}=J(),e=v(null),r=v("start"),f=v(0),d=v(1),I=v(""),m=v(!1),i=v([]);F(()=>{if(e.value){const t=e.value.querySelectorAll("img");f.value=t.length,f.value>0&&(t.forEach(s=>{i.value.push({src:s.src,alt:s.alt})}),f.value>1&&(m.value=!0),P(d,()=>{var s;i.value.length>0&&(I.value=(s=i.value[d.value-1])==null?void 0:s.alt)},{immediate:!0}))}});const W=t=>{t.classList.add("-translate-x-full")},Z=t=>{t.classList.add("translate-y-full")},y=t=>{e.value&&(t==="start"?e.value.scrollTop=0:t==="end"?e.value.scrollTop=e.value.scrollHeight-e.value.clientHeight:e.value.scrollTop=t*e.value.clientHeight)},_=t=>{e.value&&(t==="start"?e.value.scrollLeft=0:t==="end"?e.value.scrollLeft=e.value.scrollWidth-e.value.clientWidth:e.value.scrollLeft=t*e.value.clientWidth)};let T=0,H=0;const D=()=>{if(e.value){if(e.value.scrollTop!==T){const t=e.value.scrollTop;T=e.value.scrollTop,t===0?r.value="start":t+e.value.clientHeight>=e.value.scrollHeight?r.value="end":r.value="middle",d.value=Math.ceil(t/e.value.clientHeight)+1}else if(e.value.scrollLeft!==H){const t=e.value.scrollLeft;H=e.value.scrollLeft,t===0?r.value="start":t+e.value.clientWidth>=e.value.scrollWidth?r.value="end":r.value="middle",d.value=Math.round(t/e.value.clientWidth)+1}}},R=K(),$=O(),j=Q(),q=X(),M=t=>{if(t.target){const s=t.target.getBoundingClientRect();$.value={src:t.target.src,width:s.width,height:s.height,x:s.x,y:s.y},q.value=$.value,f.value>0&&e.value.querySelectorAll("img").forEach(a=>{const n=a.getBoundingClientRect();j.value.push({src:a.src,alt:a.alt,width:n.width,height:n.height,x:n.x,y:n.y})}),R.value="show"}};return(t,s)=>{const h=N;return c(),u("div",ee,[o("div",te,[o("div",le,[o("button",{class:g(["btn flex",l(m)?"text-white bg-purple-500 hover:bg-purple-400":"text-purple-400 bg-purple-100 hover:text-purple-500"]),onClick:s[0]||(s[0]=a=>m.value=!l(m))},[p(h,{name:"bi:layout-sidebar",class:"w-4 h-4 -rotate-90 sm:rotate-0"})],2),o("span",se,w(l(d))+"/"+w(l(f)),1)]),o("span",ae,w(l(I)),1),k(o("div",oe,[o("button",{disabled:l(r)==="start",class:g(["btn hidden sm:flex text-purple-400 hover:text-purple-500 active:text-white bg-purple-100 active:bg-purple-500",l(r)==="start"?"opacity-30":"opacity-100"]),onClick:s[1]||(s[1]=a=>y("start"))},[p(h,{name:"material-symbols:vertical-align-top-rounded",class:"w-4 h-4"})],10,re),o("button",{disabled:l(r)==="end",class:g(["btn hidden sm:flex text-purple-400 hover:text-purple-500 active:text-white bg-purple-100 active:bg-purple-500",l(r)==="end"?"opacity-30":"opacity-100"]),onClick:s[2]||(s[2]=a=>y("end"))},[p(h,{name:"material-symbols:vertical-align-bottom-rounded",class:"w-4 h-4"})],10,ne),o("button",{disabled:l(r)==="start",class:g(["btn flex sm:hidden text-purple-400 hover:text-purple-500 active:text-white bg-purple-100 active:bg-purple-500",l(r)==="start"?"opacity-30":"opacity-100"]),onClick:s[3]||(s[3]=a=>_("start"))},[p(h,{name:"material-symbols:vertical-align-bottom-rounded",class:"w-4 h-4 rotate-90"})],10,ie),o("button",{disabled:l(r)==="end",class:g(["btn flex sm:hidden text-purple-400 hover:text-purple-500 active:text-white bg-purple-100 active:bg-purple-500",l(r)==="end"?"opacity-30":"opacity-100"]),onClick:s[4]||(s[4]=a=>_("end"))},[p(h,{name:"material-symbols:vertical-align-top-rounded",class:"w-4 h-4 rotate-90"})],10,ce)],512),[[L,l(i).length>1]])]),o("div",{ref_key:"imgContainer",ref:e,class:"image-list-container flex sm:flex-col bg-gray-50 rounded-b-lg overflow-auto snap-mandatory snap-both",style:G(`height: ${E.height}`),onScrollPassive:D},[(c(!0),u(x,null,C(l(B)(t.$slots.default(),["p"]),(a,n)=>{var b;return c(),u(x,null,[((b=a==null?void 0:a.type)==null?void 0:b.tag)==="img"?(c(),u("div",{key:n,class:"shrink-0 w-full h-full flex justify-center items-center"},[o("img",{src:a.props.src,alt:a.props.alt,onDblclick:M},null,40,ue)])):U("",!0)],64)}),256))],36),p(z,{"enter-from-class":"translate-x-0","enter-active-class":"transition-transform duration-200 ease-in","enter-to-class":"-translate-x-full","leave-from-class":"-translate-x-full","leave-active-class":"transition-transform duration-75 ease-out","leave-to-class":"translate-x-0",onAfterEnter:W},{default:S(()=>[k(o("div",de,[(c(!0),u(x,null,C(l(i),(a,n)=>(c(),u("button",{key:n,class:g(["shrink-0 w-12 h-12 ring rounded overflow-hidden",l(d)-1===n?"ring-purple-400":"ring-transparent"]),onClick:b=>y(n)},[o("img",{src:a.src,alt:a.alt,class:"mx-auto max-h-full"},null,8,ge)],10,ve))),128))],512),[[L,l(i).length>0&&l(m)]])]),_:1}),p(z,{"enter-from-class":"translate-y-0","enter-active-class":"transition-transform duration-200 ease-in","enter-to-class":"translate-y-full","leave-from-class":"translate-y-full","leave-active-class":"transition-transform duration-75 ease-out","leave-to-class":"translate-y-0",onAfterEnter:Z},{default:S(()=>[k(o("div",pe,[(c(!0),u(x,null,C(l(i),(a,n)=>(c(),u("button",{key:n,class:g(["shrink-0 w-12 h-12 ring rounded overflow-hidden",l(d)-1===n?"ring-purple-400":"ring-transparent"]),onClick:b=>_(n)},[o("img",{src:a.src,alt:a.alt,class:"mx-auto max-h-full"},null,8,he)],10,me))),128))],512),[[L,l(i).length>0&&l(m)]])]),_:1})])}}});const we=Y(fe,[["__scopeId","data-v-a1a37802"]]);export{we as default};
